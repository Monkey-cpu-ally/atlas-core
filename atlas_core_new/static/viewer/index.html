<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ATLAS Visual Blueprint Studio</title>
    <style>
      html, body { margin:0; height:100%; overflow:hidden; font-family:'Segoe UI',Arial,sans-serif; background:#f2f5f8; }
      #ui {
        position:absolute; top:16px; left:16px; width:280px;
        background:rgba(255,255,255,0.92); padding:16px; border-radius:12px;
        border:1px solid rgba(0,0,0,0.08);
        box-shadow:0 8px 32px rgba(0,0,0,0.1);
        color:#1e293b; backdrop-filter:blur(12px);
        max-height:calc(100vh - 32px); overflow-y:auto;
      }
      #ui::-webkit-scrollbar { width:4px; }
      #ui::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:2px; }
      #ui h2 { margin:0 0 2px 0; font-size:15px; font-weight:700; color:#2563eb; }
      #ui .subtitle { font-size:10px; color:#64748b; text-transform:uppercase; letter-spacing:1px; margin-bottom:14px; }
      #ui select {
        width:100%; padding:8px 10px; border-radius:8px;
        border:1px solid #cbd5e1; background:#f8fafc; color:#1e293b;
        font-size:12px; cursor:pointer; outline:none;
      }
      #ui select:focus { border-color:#2563eb; }
      #ui select option { background:#ffffff; color:#1e293b; }
      #sliders { margin-top:6px; }
      .row { margin-top:12px; }
      .row label {
        display:flex; justify-content:space-between; align-items:center;
        font-size:11px; margin-bottom:4px; color:#475569;
        font-weight:600; text-transform:uppercase; letter-spacing:0.5px;
      }
      .row label .val { font-family:monospace; color:#94a3b8; font-size:10px; }
      .row input[type="range"] {
        width:100%; -webkit-appearance:none; appearance:none;
        height:4px; border-radius:2px; background:#cbd5e1; outline:none;
      }
      .row input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance:none; appearance:none;
        width:14px; height:14px; border-radius:50%;
        background:#2563eb; cursor:pointer; border:2px solid #ffffff;
        box-shadow:0 1px 3px rgba(0,0,0,0.2);
      }
      #footerBtns { display:flex; gap:8px; margin-top:14px; }
      #footerBtns button, #exportRow button {
        flex:1; cursor:pointer; padding:7px 12px;
        border-radius:8px; font-size:11px; font-weight:700;
        border:1px solid #cbd5e1; background:#f1f5f9; color:#475569;
        transition:all 0.15s;
      }
      #footerBtns button:hover, #exportRow button:hover {
        background:#2563eb15; color:#2563eb; border-color:#2563eb44;
      }
      #footerBtns button:disabled, #exportRow button:disabled {
        opacity:0.4; cursor:not-allowed;
      }
      #exportRow { margin-top:10px; }
      #exportRow button {
        width:100%; background:#2563eb12; color:#2563eb; border-color:#2563eb33;
      }
      #exportRow button:hover { background:#2563eb25; }
      #status {
        margin-top:8px; font-size:10px; color:#94a3b8;
        font-family:monospace; min-height:14px;
      }
      #hint {
        margin-top:12px; font-size:10px; color:#64748b;
        line-height:1.5; border-top:1px solid #e2e8f0; padding-top:10px;
      }
      #hint b { color:#475569; }
      #badge {
        position:absolute; top:16px; right:16px;
        background:rgba(255,255,255,0.88);
        border:1px solid rgba(0,0,0,0.08);
        padding:8px 14px; border-radius:8px;
        font-size:10px; color:#64748b;
        backdrop-filter:blur(8px);
      }
      #badge .lbl { color:#475569; font-weight:600; }
      #stats {
        position:absolute; bottom:16px; left:16px;
        background:rgba(255,255,255,0.88);
        border:1px solid rgba(0,0,0,0.08);
        padding:8px 14px; border-radius:8px;
        font-size:9px; color:#64748b;
        font-family:monospace; backdrop-filter:blur(8px);
      }
      #stats span { color:#475569; }
      canvas { display:block; }
    </style>
  </head>
  <body>
    <div id="ui">
      <h2>ATLAS Visual Blueprint Studio</h2>
      <div class="subtitle">Ajani Blueprint Engine &mdash; 3D Viewer</div>

      <div class="row">
        <label>Project <span class="val" id="projectDomain"></span></label>
        <select id="project">
          <option value="metal_flower">Metal Flower Mark I</option>
          <option value="green_bot">Green Bot Eco Rover</option>
          <option value="medusa_arms">Medusa Tentacle Arms</option>
          <option value="morph_panel">Morphing Structure Panel</option>
          <option value="hydrogen_module">Hydrogen Power Module</option>
        </select>
      </div>

      <div id="sliders"></div>

      <div id="footerBtns">
        <button id="reset">Reset View</button>
        <button id="shot">Screenshot</button>
      </div>

      <div id="exportRow">
        <button id="export">Export Step Images (ZIP)</button>
        <div id="status"></div>
      </div>

      <div id="partInfo" style="
        margin-top:10px; padding:10px; border-radius:10px;
        background:rgba(255,255,255,0.92); border:1px solid #cfd7e1;
        font-size:12px; line-height:1.6; color:#334155;">
        <b>Part:</b> None<br/>
        <b>Function:</b> &mdash;<br/>
        <b>Material:</b> &mdash;<br/>
        <b>Tool:</b> &mdash;
      </div>

      <div style="display:flex; gap:8px; margin-top:10px;">
        <button id="action1" style="
          flex:1; cursor:pointer; padding:7px 12px;
          border-radius:8px; font-size:11px; font-weight:700;
          border:1px solid #cbd5e1; background:#f1f5f9; color:#475569;
          transition:all 0.15s;">Action 1</button>
        <button id="action2" style="
          flex:1; cursor:pointer; padding:7px 12px;
          border-radius:8px; font-size:11px; font-weight:700;
          border:1px solid #cbd5e1; background:#f1f5f9; color:#475569;
          transition:all 0.15s;">Action 2</button>
      </div>

      <div id="hint">
        Click any part to inspect it.<br>
        Use <b>Explode</b> to separate parts like an assembly blueprint.<br>
        <b>Export</b> captures step_01.png through step_N.png for Atlas manuals.
      </div>
    </div>

    <div id="badge">
      <span class="lbl" id="badgeInfo">MATERIALS &middot; LOW SAFETY &middot; v1.0</span>
    </div>

    <div id="stats">
      <span id="statsInfo">Components loading...</span>
    </div>

    <script>
      window.onerror = function(msg, url, line, col, err) {
        var el = document.getElementById("statsInfo");
        if (el) el.textContent = "JS Error: " + msg + " (line " + line + ")";
        console.error("Global error:", msg, url, line, col, err);
      };
    </script>
    <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script type="module" src="/viewer/assets/main.js"></script>
  </body>
</html>
